# 解码器配置简化说明

根据官方建议，视频解码器配置已经进行了简化。官方回复是："你所有的setProperty都是错的。不要搞这么复杂，一般设了解码器就好了。video_player_mdk.dart里的几个property足够了"。

## 已做的修改

1. 移除了 `_setGlobalDecodingProperties` 方法中大量不必要的 `setProperty` 调用
2. 保留了必要的线程配置 `video.decode.thread`
3. 从 `initialize()` 方法中移除了对 `_setGlobalDecodingProperties` 的调用
4. 简化了 `forceEnableHardwareDecoder` 和 `toggleHardwareDecoder` 方法，移除多余的属性设置

## 解码器设置原理

MDK播放器的正确使用方式是通过 `setDecoders` 方法设置解码器列表，让播放器引擎自行选择最适合的解码器。不需要手动调用大量的 `setProperty` 方法来配置细节，这会导致问题。

video_player_mdk.dart 已经包含了必要的 `setProperty` 调用:

```dart
player.setProperty('video.decoder', 'shader_resource=0');
player.setProperty('avformat.strict', 'experimental');
player.setProperty('avio.reconnect', '1');
player.setProperty('avio.reconnect_delay_max', '7');
player.setProperty('avio.protocol_whitelist',
    'file,rtmp,http,https,tls,rtp,tcp,udp,crypto,httpproxy,data,concatf,concat,subfile');
player.setProperty('avformat.rtsp_transport', 'tcp');
```

这些设置是足够的，不需要额外的复杂配置。

## 对用户体验的影响

该简化不会影响硬件加速功能，反而可能解决之前可能出现的视频解码问题。硬件解码仍然可以正常工作，只是现在使用了更简洁、官方推荐的设置方式。

## 后续建议

如果在实际使用中遇到特定的解码问题，可以有针对性地添加必要的属性设置，但应该避免添加大量没有特定目的的配置。 